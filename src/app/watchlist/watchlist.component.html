<div class="container">
    <div class="row" *ngIf="(watchlistMovies | async).films.length > 0; else noFilms">

        <div class="col-12" style="margin-top: 3%;">
            <h1 style="display: inline;">My Watchlist</h1>
            <mat-slide-toggle class="example-margin" style="float: right;" labelPosition="before" color="primary" 
                [checked]="tableView" (change)="switchView()"> View Watchlist in Table &nbsp;
            </mat-slide-toggle>
        </div>

        <ng-container *ngIf="!tableView">
            <div *ngFor="let film of (watchlistMovies | async).films;" class="col-2">
                <mat-card style="margin-top: 5%;" class="watchlist-movie-card">
                    <img mat-card-image src="{{ film.movieDetails?.poster }}" alt="{{ film.movieDetails?.title }}"/>
                    <!-- <span>Text over image</span> -->
                    <mat-card-footer>
                        <button mat-mini-fab color="primary" style="float: right; margin: 3px; background-color: #c2185ca4;" (click)="removeWatchlistItem(film)"><mat-icon>remove_circle</mat-icon></button>
                    </mat-card-footer>
                </mat-card>
            </div>
        </ng-container>

        <div *ngIf="tableView" class="col-12" style="margin-top: 1%;">
            <table mat-table [dataSource]="(watchlistMovies | async).films" class="mat-elevation-z8">
                
                <ng-container matColumnDef="title">
                    <th mat-header-cell *matHeaderCellDef>Title</th>
                    <td mat-cell *matCellDef="let film"> {{ film.movieDetails.title }} </td>
                </ng-container>

                <ng-container matColumnDef="director">
                    <th mat-header-cell *matHeaderCellDef> Director </th>
                    <td mat-cell *matCellDef="let film"> {{ getDirector(film) }} </td>
                </ng-container>

                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef> Date </th>
                    <td mat-cell *matCellDef="let film"> {{ getReleaseDate(film) }} </td>
                </ng-container>

                <ng-container matColumnDef="rating">
                    <th mat-header-cell *matHeaderCellDef> Rating </th>
                    <td mat-cell *matCellDef="let film"> {{ getRating(film) }} </td>
                </ng-container>

                <ng-container matColumnDef="options">
                    <th mat-header-cell *matHeaderCellDef> Options </th>
                    <td mat-cell *matCellDef="let film">
                        <button mat-icon-button title="Write a Review" (click)="removeWatchlistItem(film)">
                            <mat-icon>create</mat-icon></button> 
                        <button mat-icon-button title="Remove from Watchlist" (click)="removeWatchlistItem(film)">
                            <mat-icon>remove_circle</mat-icon></button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="tableDisplayCols"></tr>
                <tr mat-row *matRowDef="let row; columns: tableDisplayCols;"></tr>
            </table>
        </div>

    </div>

    <ng-template #noFilms>
        <div class="col-12" style="padding-top: 10%; margin: auto; text-align: center;">
            <img src="../../assets/images/no-items-found.png" alt="No Items Found" style="opacity: 40%; height: 250px;"/>
            <h1 style="color: #a1a1a1;">No Items Found</h1>
            <p style="color: #707070;">Add movies to the watchlist from the search section</p>
        </div>
    </ng-template>

</div>
